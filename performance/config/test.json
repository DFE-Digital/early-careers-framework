{
  "scenarios": {
    "smoke-test": {
      "executor": "constant-arrival-rate",
      "rate": 1,
      "timeUnit": "1s",
      "duration": "60s",
      "preAllocatedVUs": 3,
      "exec": "smokeTest"
    },

    "breakpoint-test":{
      "executor": "ramping-arrival-rate",
      "preAllocatedVUs": 20000,
      "stages": [
        { "duration": "20000s", "target": 20000 }
      ],
      "exec": "breakpointTest"
    },

    "api-smoke-test": {
      "executor": "constant-arrival-rate",
      "rate": 1,
      "timeUnit": "1s",
      "duration": "30s",
      "preAllocatedVUs": 1,
      "exec": "apiSmokeTest"
    },

    "api-breakpoint-test":{
      "executor": "ramping-arrival-rate",
      "preAllocatedVUs": 20000,
      "stages": [
        { "duration": "20000s", "target": 20000 }
      ],
      "exec": "apiBreakpointTest"
    },

    "api-load-test": {
      "executor": "constant-arrival-rate",
      "rate": 1,
      "timeUnit": "1s",
      "duration": "600s",
      "preAllocatedVUs": 15,
      "exec": "apiLoadTest"
    }
  },

  "thresholds": {
    "http_req_failed{scenario:smoke-test}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_receiving{scenario:smoke-test}": [
      { "threshold": "p(95)<200", "abortOnFail": false },
      { "threshold": "max<500", "abortOnFail": false }
    ],

    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v1/participants/ecf}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v1/npq-applications}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v1/participants/npq}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v1/participants/npq/outcomes}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v1/participant-declarations}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v2/participants/ecf}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v2/npq-applications}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v2/participants/npq}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v2/participants/npq/outcomes}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v2/participant-declarations}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v3/participants/ecf}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v3/npq-applications}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v3/participants/npq}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v3/participants/npq/outcomes}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-smoke-test,targetPath:/api/v3/participant-declarations}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],

    "http_req_failed{scenario:api-load-test,group:::API v1::/participants/ecf?page[page]=first}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-load-test,group:::API v1::/participants/ecf?page[page]=last}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-load-test,group:::API v2::/participants/ecf?page[page]=first}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-load-test,group:::API v2::/participants/ecf?page[page]=last}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-load-test,group:::API v3::/participants/ecf?page[page]=first}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],
    "http_req_failed{scenario:api-load-test,group:::API v3::/participants/ecf?page[page]=last}": [
      { "threshold": "rate<0.1", "abortOnFail": false }
    ],

    "http_req_receiving{scenario:api-load-test,group:::API v1::/participants/ecf?page[page]=first}": [
      { "threshold": "p(95)<30000", "abortOnFail": false },
      { "threshold": "max<30000", "abortOnFail": false }
    ],
    "http_req_receiving{scenario:api-load-test,group:::API v1::/participants/ecf?page[page]=last}": [
      { "threshold": "p(95)<30000", "abortOnFail": false },
      { "threshold": "max<30000", "abortOnFail": false }
    ],
    "http_req_receiving{scenario:api-load-test,group:::API v2::/participants/ecf?page[page]=first}": [
      { "threshold": "p(95)<30000", "abortOnFail": false },
      { "threshold": "max<30000", "abortOnFail": false }
    ],
    "http_req_receiving{scenario:api-load-test,group:::API v2::/participants/ecf?page[page]=last}": [
      { "threshold": "p(95)<30000", "abortOnFail": false },
      { "threshold": "max<30000", "abortOnFail": false }
    ],
    "http_req_receiving{scenario:api-load-test,group:::API v3::/participants/ecf?page[page]=first}": [
      { "threshold": "p(95)<30000", "abortOnFail": false },
      { "threshold": "max<30000", "abortOnFail": false }
    ],
    "http_req_receiving{scenario:api-load-test,group:::API v3::/participants/ecf?page[page]=last}": [
      { "threshold": "p(95)<30000", "abortOnFail": false },
      { "threshold": "max<30000", "abortOnFail": false }
    ],

    "http_req_failed{scenario:breakpoint-test}": [
      { "threshold": "rate<0.1", "abortOnFail": true, "delayAbortEval": "1s" }
    ]
  }
}



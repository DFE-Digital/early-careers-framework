<% content_for :title, t("finance.npq.payment_breakdown") %>
<% content_for :before_content, govuk_back_link(text: "Back", href: select_provider_npq_finance_payment_breakdowns_path) %>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h1 class="govuk-heading-xl">National professional qualifications (NPQs)</h1>
      <span class="govuk-caption-l"><%= @statement.cpd_lead_provider.name %></span>
      <h2 class="govuk-heading-l"><%= @statement.name %></h2>
      <%= render Finance::Statements::StatementSelector.new(current_statement: @statement) %>
      <%= render Finance::NPQ::PaymentOverviews::PaymentOverviewSummary.new(@npq_contracts, @statement, @npq_lead_provider) %>
      <br>
    </div>
    <div class="govuk-grid-column-full">
      <div class="app-application__panel">
        <div class="moj-filter-layout__content">
          <% @npq_contracts.each do |npq_contract| %>
            <section class="app-application__card">
              <h2 class="govuk-heading-s"><%= t("#{ npq_contract.course_identifier }", scope: "npq_courses") %></h2>
              <%= render Finance::NPQ::PaymentOverviews::PaymentOverviewTableHeader.new(npq_contract, @statement, @npq_lead_provider) %>
              <span class="govuk-label--s govuk-visually-hidden">Payment details</span>
              <%= render Finance::NPQ::PaymentOverviews::PaymentOverviewTable.new(npq_contract, @statement, @npq_lead_provider) %>
            </section>
            <br>
          <% end %>
        </div>
      </div>
      <ul class="govuk-list">
        <li><%= govuk_link_to t("finance.show_voided_declarations"), voided_finance_npq_lead_provider_statement_path(@npq_lead_provider.id, @statement) %></li>
        <li><%= govuk_link_to t("finance.show_contract"), finance_npq_contract_path(id: @npq_lead_provider.id) %></li>
      </ul>
    </div>
  </div>

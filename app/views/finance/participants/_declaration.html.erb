<%= govuk_summary_list do |summary_list| %>
  <% summary_list.row do |row| %>
    <% row.key { "Declaration ID" } %>
    <% row.value { declaration.id } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Declaration type" } %>
    <% row.value { declaration.declaration_type } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Declaration date" } %>
    <% row.value { declaration.declaration_date.to_s(:govuk) } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Course identifier" } %>
    <% row.value { declaration.course_identifier } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Evidence held" } %>
    <% row.value { declaration.evidence_held } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Lead provider" } %>
    <% row.value { declaration.cpd_lead_provider.name } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "State" } %>
    <% row.value { declaration.state } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Created at" } %>
    <% row.value { declaration.created_at.to_s(:govuk) } %>
  <% end %>

  <% summary_list.row do |row| %>
    <% row.key { "Updated at" } %>
    <% row.value { declaration.updated_at.to_s(:govuk) } %>
  <% end %>
<% end %>

<h4>Declaration State History</h4>

<div class="nhsuk-table-container">
  <table data-test="admin-participants-table" class="govuk-table nhsuk-table-responsive">
    <thead  class="nhsuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header">State</th>
        <th scope="col" class="govuk-table__header">Changed at</th>
        <th scope="col" class="govuk-table__header">Reason</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body nhsuk-table__body">
      <% declaration.declaration_states.each do |declaration_state| %>
        <tr class="govuk-table__row nhsuk-table__row">
          <td class="govuk-table__cell nhsuk-table__cell">
            <%= declaration_state.state %>
          </td>
          <td class="govuk-table__cell nhsuk-table__cell">
            <%= declaration_state.created_at.to_s(:govuk) %>
          </td>
          <td class="govuk-table__cell nhsuk-table__cell">
            <%= declaration_state.state_reason || 'N/A' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
